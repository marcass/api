#Forwards requests to carrier grade natted ipv4 server at home via ipv6
server {
	listen 80;
	listen [::]:80;
	
	listen [::]:443 ssl ipv6only=on; # managed by Certbot
	listen 443 ssl; # managed by Certbot

	server_name wilsonbay.duckdns.org;

	location /api {
		rewrite ^(.*) $1 break;
		proxy_pass https://skibo.duckdns.org;
	}

	location /marcus {
		proxy_pass https://skibo.duckdns.org;
#		proxy_pass http://localhost:5000;
		limit_except POST {
			deny all;
		}
	}

    ssl_certificate /etc/letsencrypt/live/wilsonbay.duckdns.org/fullchain.pem; # managed by Certbot
    ssl_certificate_key /etc/letsencrypt/live/wilsonbay.duckdns.org/privkey.pem; # managed by Certbot
}

